# 8. 자바스크립트의 객체는 참조에 의해 복사됩니다. 이로 인해 생길 수 있는 오류와, 해당 오류를 피하는 방법을 설명해주세요.

`의도: 참조에 의한 접근과 값에 의한 접근을 구분`

자바스크립트에서 객체는 참조에 의한 복사가 되는데,
그 이유는 값 자체를 복사하는 것이 아니라 값이 들어있는 `메모리 주소`를 복사하기 때문.

그러니 객체를 복사하게 되면 서로 같은 메모리 주소를 가리키게 되어 한쪽의 값을 바꾸면
다른 쪽이 보여주는 값도 영향을 받아 함께 변경됨.

그렇기에 `깊은 복사`를 통해 객체 또한 값으로서 복사하는 방법을 사용함.

대표적인 방법으로 `JSON.stringify()`를 통해 객체를 문자열로 바꾸어 복사하는 방법이 있고(간단하고 직관적이지만, 함수와 `undefined`값은 복사되지 않음),
비교적 최근에 나온 `structuredClone()`을 사용하는 방법이 있음(`undefined`를 제회한 모든 데이터 유형을 정확히 복사하지만 최신 브라우저에서만 지원.)

```jsx
// 1. JSON 방법
let obj1 = { a: 1 };
let obj2 = JSON.parse(JSON.stringify(obj1));

obj2.a = 2;
console.log(obj1.a); // 1

// 2. structuredClone 방법
let obj1 = { a: 1 };
let obj2 = structuredClone(obj1);

obj2.a = 2;
console.log(obj1.a); // 1
```

`Lodash`라이브러리를 사용하는 방법도 있는 `_.cloneDeep`메서드를 사용하여 깊을 복사를 할 수 있다.

```jsx
let obj1 = { a: 1 };
let obj2 = _.cloneDeep(obj1);

obj2.a = 2;
console.log(obj1.a); // 1
```

복잡한 구조의 객체도 정확하게 깊은 복사 할 수 있지만, 외부 라이브러리를 사용한다는 것이 단점일 수 있다.
